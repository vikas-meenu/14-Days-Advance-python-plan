import csv
import os
class Student:
    def __init__(self, name, age,marks):
        self.name = name
        self.age = age
        self.marks = marks
class StudentManager:
    FILE="Student_Management.csv"
    def __init__(self):
        self.students=[]
        self.load_from_file()
    def add_student(self):
        name=input("Enter student name: ")
        age=int(input("Enter age: "))
        marks=float(input("Enter marks: "))
        student=Student(name,age,marks)
        self.students.append(student)
        print("Student added successfully ✔ ")

    def view_student(self):
        if not self.students:
            print("No students added yet!")
            return
        print("\n----student list-----")
        for s in self.students:
            print(f"Name:{s.name},Age:{s.age},Marks:{s.marks}")

    def save_to_file(self):
        with open(self.FILE,"w",newline="")as f:
            writer=csv.writer(f)
            writer.writerow(["name","age","marks"])
            for s in self.students:
                writer.writerow([s.name,s.age,s.marks])
                print("student data saved to file ✔")
    def load_from_file(self):
        if not os.path.exists(self.FILE):
            return
        with open(self.FILE,"r") as f:
            reader=csv.DictReader(f)
            for row in reader:
                student=Student(row["name"],row["age"],row["Marks"])
                self.students.append(student)
                print("Successfully loaded previous student report!")
manager=StudentManager()
while True:
    print("1.Add student")
    print("2.View student")
    print("3.Save student")
    print("4.Exit")
    choice=input("Enter your choice: ")
    if choice=="1":
        manager.add_student()
    elif choice=="2":
        manager.view_student()
    elif choice=="3":
        manager.save_to_file()
    elif choice=="4":
        print("Exiting the student manager system")
    else:
        print("Invalid choice")
